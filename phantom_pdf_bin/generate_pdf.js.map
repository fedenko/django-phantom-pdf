{"version":3,"sources":["webpack:///webpack/bootstrap d3340a8fcd523a871337","webpack:///./coffee/generate_pdf.coffee","webpack:///external \"webpage\"","webpack:///external \"system\"","webpack:///external \"fs\""],"names":[],"mappings":"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","file":"generate_pdf.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/phantom_pdf_bin/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d3340a8fcd523a871337\n **/","# Create a page object\npage = require('webpage').create()\n# Require the system module so I can read the command line arguments\nsystem = require('system')\n# Require the FileSystem module, so I can read the cookie file\n\nconsole.error = ->\n  system.stderr.write Array::join.call(arguments, ' ') + '\\n'\n  return\n\nfs = require('fs')\n# Read the url and output file location from the command line argument\n# Read the cookie file and split it by spaces\n# Because the way I constructed this file, separate each field using spaces\nsformat = (template, data) ->\n  template.replace /{{(.*?)}}/g, (m, n) ->\n    eval 'data.' + n\n\naddress = system.args[1]\noutput = system.args[2]\ncookies = JSON.parse(system.args[3])\nacceptLanguage = system.args[4]\npaperSize = JSON.parse(system.args[5])\nviewportSize = JSON.parse(system.args[6]) if system.args.length >= 7\ncompensateForPhantomV2PdfRenderingBug = parseFloat(system.args[7]) if system.args.length == 8\n\n\n# Now we can add cookies into phantomjs, so when it renders the page, it\n# will have the same permission and data as the current user\n\nfor domain, domain_cookies of cookies\n  for name, value of domain_cookies\n    phantom.addCookie\n      'domain': domain\n      'name': name\n      'value': value\n\npage.customHeaders = 'Accept-Language': acceptLanguage\n\n# Set the page size and orientation\nif paperSize.header\n  if paperSize.header.contents\n    header_contents = paperSize.header.contents\n    paperSize.header.contents = phantom.callback((pageNum, numPages) ->\n      sformat header_contents,\n        page_num: pageNum\n        num_pages: numPages\n    )\n    # console.log paperSize.header.contents\nif paperSize.footer\n  if paperSize.footer.contents\n    footer_contents = paperSize.footer.contents\n    paperSize.footer.contents = phantom.callback((pageNum, numPages) ->\n      sformat footer_contents,\n        page_num: pageNum\n        num_pages: numPages\n    )\n    # console.log paperSize.footer.contents\n\npage.paperSize = paperSize\npage.viewportSize = viewportSize if Object.keys(viewportSize).length\n\n\n# Now we have everything settled, let's render the page\n\npage.open address, (status) ->\n  if status != 'success'\n    # If PhantomJS failed to reach the address, print a message\n    console.error \"Unable to load the address \\\"#{address}\\\"\"\n    phantom.exit(1)\n  else\n    # Now create the output file and exit PhantomJS\n    if compensateForPhantomV2PdfRenderingBug > 0 and compensateForPhantomV2PdfRenderingBug != 1\n      page.evaluate ((zoom) ->\n        document.querySelector('body').style.zoom = zoom\n        ), compensateForPhantomV2PdfRenderingBug\n    page.render output\n    phantom.exit(0)\n  return\n\n\n\n/** WEBPACK FOOTER **\n ** ./coffee/generate_pdf.coffee\n **/","module.exports = require(\"webpage\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"webpage\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"system\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"system\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}